mapreduce:
- name: Delete all entities of a given kind
  mapper:
    input_reader: mapreduce.input_readers.DatastoreInputReader
    handler: mappers.delete
    params:
    - name: entity_kind
      default: mol.db.Species

- name: Build Tile entities from TmpTile entities
      default: Tiles.Tile
      
- name: Process queued Tiles stored in TileUpdate
  mapper:
    input_reader: mapreduce.input_readers.DatastoreInputReader
    handler: mappers.interpolate
    params:
    - name: entity_kind
      default: Tiles.TileUpdate
    - name: shard_count
      default: 2
